@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --font-sans: 'Inter', sans-serif;
  --font-display: 'Cinzel', serif;

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-gold: hsl(45 93% 47%);
  --color-gold-light: hsl(45 93% 70%);
  --color-gold-dark: hsl(45 93% 25%);
  --color-board-bg: rgba(20, 10, 30, 0.7);
  --color-panel-bg: rgba(10, 5, 15, 0.85);
  
  --color-hp-red: hsl(0 84% 60%);
  --color-hp-green: hsl(142 71% 45%);
  --color-exp-gold: hsl(45 93% 50%);

  --color-gem-red: hsl(350 80% 55%);
  --color-gem-blue: hsl(220 80% 60%);
  --color-gem-green: hsl(130 70% 50%);
  --color-gem-yellow: hsl(45 90% 55%);
  --color-gem-purple: hsl(280 70% 60%);
  --color-gem-cyan: hsl(190 80% 60%);

  /* Animations */
  --animate-combo-pop: combo-pop 0.5s ease-out forwards;
  --animate-float: float 3s ease-in-out infinite;
  --animate-pulse-glow: pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-gem-drop: gem-drop 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  --animate-gem-swap: gem-swap 0.2s ease-in-out;
  --animate-match-glow: match-glow 0.4s ease-out;
  --animate-particle-up: particle-up 2s linear infinite;
}

:root {
  --background: 260 50% 5%;
  --foreground: 45 90% 90%;
  --border: 45 93% 30%;
}

@layer base {
  body {
    @apply font-sans antialiased bg-background text-foreground overflow-hidden touch-none select-none;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }
}

@keyframes combo-pop {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.3); opacity: 1; filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8)); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 5px rgba(251, 191, 36, 0.2), inset 0 0 5px rgba(251, 191, 36, 0.2); }
  50% { box-shadow: 0 0 15px rgba(251, 191, 36, 0.6), inset 0 0 10px rgba(251, 191, 36, 0.4); border-color: rgba(251, 191, 36, 1); }
}

@keyframes gem-drop {
  from { transform: translateY(-100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes match-glow {
  0% { filter: brightness(1) drop-shadow(0 0 0px transparent); transform: scale(1); }
  50% { filter: brightness(2) drop-shadow(0 0 20px rgba(255,255,255,0.8)); transform: scale(1.1); z-index: 10; }
  100% { filter: brightness(0) drop-shadow(0 0 0px transparent); transform: scale(0); opacity: 0; }
}

@keyframes particle-up {
  0% { transform: translateY(0) scale(1); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-100px) scale(0); opacity: 0; }
}

.gem-base {
  @apply relative w-full h-full rounded-md shadow-md transition-transform flex items-center justify-center;
  box-shadow: inset 0 0 10px rgba(255,255,255,0.4), inset 0 -4px 8px rgba(0,0,0,0.4), 0 2px 4px rgba(0,0,0,0.5);
  border: 1px solid rgba(255,255,255,0.2);
}

.gem-base::after {
  content: '';
  @apply absolute top-1 left-1 right-1 h-1/3 rounded-full opacity-50;
  background: linear-gradient(to bottom, rgba(255,255,255,0.8), transparent);
}

.gem-red { background: radial-gradient(circle at 30% 30%, var(--color-gem-red), #600000); }
.gem-blue { background: radial-gradient(circle at 30% 30%, var(--color-gem-blue), #000060); }
.gem-green { background: radial-gradient(circle at 30% 30%, var(--color-gem-green), #004000); }
.gem-yellow { background: radial-gradient(circle at 30% 30%, var(--color-gem-yellow), #605000); }
.gem-purple { background: radial-gradient(circle at 30% 30%, var(--color-gem-purple), #300050); }
.gem-cyan { background: radial-gradient(circle at 30% 30%, var(--color-gem-cyan), #004050); }

.fantasy-border {
  @apply relative rounded-lg;
  border: 2px solid var(--color-gold-dark);
  background: var(--color-panel-bg);
  box-shadow: 0 4px 12px rgba(0,0,0,0.8), inset 0 0 15px rgba(0,0,0,0.8);
}

.fantasy-border::before {
  content: '';
  @apply absolute inset-0 rounded-lg pointer-events-none;
  border: 1px solid rgba(251, 191, 36, 0.3);
}

.gold-text {
  background: linear-gradient(to bottom, #fff7d6, #fcd34d, #b45309);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  filter: drop-shadow(0 2px 2px rgba(0,0,0,0.8));
}

.progress-bar-bg {
  @apply relative overflow-hidden rounded-full;
  background: rgba(0,0,0,0.6);
  border: 2px solid var(--color-gold-dark);
  box-shadow: inset 0 2px 4px rgba(0,0,0,0.8), 0 1px 2px rgba(255,255,255,0.1);
}

.progress-bar-fill {
  @apply h-full transition-all duration-500 ease-out relative;
}

@keyframes sweep {
  0% { transform: translateX(-100%) skewX(-20deg); }
  20%, 100% { transform: translateX(200%) skewX(-20deg); }
}

@keyframes flash-green {
  0% { background-color: rgba(34, 197, 94, 0); }
  50% { background-color: rgba(34, 197, 94, 0.5); }
  100% { background-color: rgba(34, 197, 94, 0); }
}

@keyframes flash-red {
  0% { background-color: rgba(239, 68, 68, 0); }
  50% { background-color: rgba(239, 68, 68, 0.5); }
  100% { background-color: rgba(239, 68, 68, 0); }
}

@keyframes shimmer {
  0% { opacity: 0.3; }
  50% { opacity: 0.6; }
  100% { opacity: 0.3; }
}

.animate-sweep {
  animation: sweep 5s infinite linear;
}

.flash-green {
  animation: flash-green 0.3s ease-out;
}

.flash-red {
  animation: flash-red 0.2s ease-out;
}

.animate-shimmer {
  animation: shimmer 2s infinite ease-in-out;
}

.progress-bar-fill::after {
  content: '';
  @apply absolute inset-0;
  background: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%, transparent 50%, rgba(0,0,0,0.2) 100%);
}

.flying-energy-particle {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
  transform: translate(-50%, -50%);
  position: fixed;
  pointer-events: none;
  z-index: 9999;
}

.flying-energy-particle.green { color: #10b981; background: #10b981; }
.flying-energy-particle.blue { color: #3b82f6; background: #3b82f6; }
.flying-energy-particle.red { color: #ef4444; background: #ef4444; }
.flying-energy-particle.purple { color: #a855f7; background: #a855f7; }
.flying-energy-particle.yellow { color: #eab308; background: #eab308; }

.cyan-burst-effect {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(6, 182, 212, 0.8) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  animation: cyan-burst-anim 0.6s ease-out forwards;
  position: absolute;
  pointer-events: none;
  z-index: 100;
}

@keyframes cyan-burst-anim {
  0% { transform: translate(-50%, -50%) scale(0.1); opacity: 1; filter: brightness(2); }
  50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.8; }
  100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
}

/* IDLE CANLILIK */
.tile {
  position: relative;
  will-change: transform, filter;
  animation: idle-float 3s ease-in-out infinite;
  transition: transform 0.18s ease-out, filter 0.18s ease-out;
}

@keyframes idle-float {
  0%, 100% { transform: scale(1); filter: drop-shadow(0 0 2px rgba(255,255,255,0.2)); }
  50% { transform: scale(1.02); filter: drop-shadow(0 0 5px rgba(255,255,255,0.4)); }
}

/* HOVER */
.tile:hover {
  transform: translateY(-5px) scale(1.08) !important;
  filter: brightness(1.1) drop-shadow(0 5px 15px rgba(0,0,0,0.3));
  z-index: 10;
}

/* BAR IMPACT */
.hp-impact, .shield-impact, .mana-impact, .skill-impact, .attack-impact {
  animation: bar-impact-pulse 0.25s ease-out;
}

@keyframes bar-impact-pulse {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.05); filter: brightness(1.3); }
}

.board.premium-shake {
  animation: premiumShakePlus 0.28s ease;
}

@keyframes premiumShakePlus {
  0% { transform: translate(0,0); }
  20% { transform: translate(-3px,2px); }
  40% { transform: translate(3px,-2px); }
  60% { transform: translate(-2px,1px); }
  80% { transform: translate(2px,-1px); }
  100% { transform: translate(0,0); }
}

.tile.premium-fall {
  animation: premiumFallPlus 0.34s cubic-bezier(.2,.8,.2,1);
  filter: brightness(1.15);
}

@keyframes premiumFallPlus {
  0%   { transform: translateY(-30px); }
  75%  { transform: translateY(0); }
  88%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}
